{% extends "ventas/base_dashboard.html" %}
{% load tz %}
{% block title %}Estadísticas{% endblock %}

{% block content %}
<h2 class="text-2xl font-bold mb-4">📊 Estadísticas Personales</h2>

<!-- FILTRO POR RANGO -->
<form method="GET" class="mb-6 bg-white p-4 rounded shadow flex flex-col md:flex-row items-end md:items-center gap-4">
  <div>
    <label class="block text-sm font-medium text-gray-600">Desde:</label>
    <input type="date" name="fecha_inicio" value="{{ request.GET.fecha_inicio }}" class="border rounded px-2 py-1 w-full">
  </div>
  <div>
    <label class="block text-sm font-medium text-gray-600">Hasta:</label>
    <input type="date" name="fecha_fin" value="{{ request.GET.fecha_fin }}" class="border rounded px-2 py-1 w-full">
  </div>
  <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
    🔍 Filtrar
  </button>
</form>

<!-- RESULTADO DEL FILTRO -->
{% if total_personalizado != None %}
<div class="bg-yellow-100 p-4 mb-4 rounded text-center">
  <strong class="text-yellow-800">Ganancia en el rango seleccionado:</strong>
  <p class="text-yellow-700 text-xl font-bold mt-1">S/ {{ total_personalizado|floatformat:2 }}</p>
</div>
{% endif %}

<!-- ESTADÍSTICAS RESUMIDAS -->
<div class="grid grid-cols-1 md:grid-cols-3 gap-6">
  <div class="bg-white p-6 rounded shadow text-center">
    <h3 class="text-lg font-semibold text-gray-700">Hoy</h3>
    <p class="text-2xl font-bold text-blue-600">S/ {{ total_hoy|floatformat:2 }}</p>
  </div>
  <div class="bg-white p-6 rounded shadow text-center">
    <h3 class="text-lg font-semibold text-gray-700">Esta Semana</h3>
    <p class="text-2xl font-bold text-green-600">S/ {{ total_semana|floatformat:2 }}</p>
  </div>
  <div class="bg-white p-6 rounded shadow text-center">
    <h3 class="text-lg font-semibold text-gray-700">Este Mes</h3>
    <p class="text-2xl font-bold text-purple-600">S/ {{ total_mes|floatformat:2 }}</p>
  </div>
</div>
{% endblock %}
